(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-568c9a4a"],{"04ed":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules,"label-width":"100px","status-icon":""}},[a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{on:{blur:function(e){return t.trim("name")}},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"碳积分",prop:"integral"},on:{blur:function(e){return t.trim("integral")}}},[a("el-input",{model:{value:t.formData.integral,callback:function(e){t.$set(t.formData,"integral",e)},expression:"formData.integral"}})],1),a("el-form-item",{attrs:{label:"商品描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",clearable:"",maxlength:"300","show-word-limit":"",resize:"none",rows:"5"},on:{blur:function(e){return t.trim("description")}},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),a("el-form-item",{attrs:{label:"图片",required:""}},[a("el-upload",{staticClass:"upload-container",attrs:{action:"/api/upload/merchandise",name:"merchandise","show-file-list":!1,"before-upload":t.beforeUpload,"on-success":t.success,"on-error":t.error,accept:t.accept}},[t.imageUrl?a("div",{staticClass:"avatar-container"},[a("custom-image",{attrs:{url:t.imageUrl},on:{load:function(e){return t.load(t.imageUrl)}}})],1):a("div",{staticClass:"content-container"},[a("i",{staticClass:"el-icon-plus"})])])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submit}},[t._v("提交")]),a("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1)},r=[],i=(a("a4d3"),a("e01a"),a("b0c0"),a("a9e3"),a("e49c")),o=a("9a2e"),s=a("11f8"),c={name:"MerchandiseForm",mixins:[i["a"],o["a"]],props:{id:{type:Number,default:-1},name:{type:String,default:""},integral:{type:String,default:""},description:{type:String,default:""},path:{type:String,default:""}},data:function(){return{formData:{name:"",description:"",integral:""},rules:{name:[{required:!0,message:"不能为空",whitespace:!0}],integral:[{required:!0,message:"不能为空"},{pattern:/(^[1-9][0-9]{0,4}(\.[0-9]{1,2})?$)|(^0?\.[0-9]{1,2}$)/,message:"不符合要求"}],description:[{required:!0,message:"不能为空",whitespace:!0}]},loading:!1,maxUploadCount:1}},components:{CustomImage:s["a"]},watch:{id:function(){this.init()}},computed:{imageUrl:function(){return this.fileList[0].imageUrl}},created:function(){this.init()},methods:{init:function(){-1!==this.id?(this.formData.name=this.name,this.formData.description=this.description,this.formData.integral=this.integral,this.fileList=[{path:this.path,imageUrl:this.path}]):this.fileList=[{imageUrl:"",path:""}]},cancel:function(){this.loading=!1},submit:function(){var t=this;""!==this.fileList[0].path?this.$refs.form.validate((function(e){e&&(t.loading=!0,t.$emit("submit",{name:t.formData.name,description:t.formData.description,integral:parseFloat(t.formData.integral),path:t.fileList[0].path}))})):this.$message.error("请选择一张图片！")},reset:function(){this.init(),-1===this.id&&this.$refs.form.resetFields()}}},l=c,f=(a("beb7"),a("2877")),u=Object(f["a"])(l,n,r,!1,null,"7d646cf0",null);e["a"]=u.exports},4720:function(t,e,a){},"498a":function(t,e,a){"use strict";var n=a("23e7"),r=a("58a8").trim,i=a("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),r=a("5899"),i="["+r+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(s,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,a){var n=a("861d"),r=a("d2bb");t.exports=function(t,e,a){var i,o;return r&&"function"==typeof(i=e.constructor)&&i!==a&&n(o=i.prototype)&&o!==a.prototype&&r(t,o),t}},a3ae:function(t,e,a){"use strict";var n=a("cee3"),r=a.n(n);r.a},a79d:function(t,e,a){"use strict";var n=a("23e7"),r=a("c430"),i=a("fea9"),o=a("d039"),s=a("d066"),c=a("4840"),l=a("cdf9"),f=a("6eeb"),u=!!i&&o((function(){i.prototype["finally"].call({then:function(){}},(function(){}))}));n({target:"Promise",proto:!0,real:!0,forced:u},{finally:function(t){var e=c(this,s("Promise")),a="function"==typeof t;return this.then(a?function(a){return l(e,t()).then((function(){return a}))}:t,a?function(a){return l(e,t()).then((function(){throw a}))}:t)}}),r||"function"!=typeof i||i.prototype["finally"]||f(i.prototype,"finally",s("Promise").prototype["finally"])},a9e3:function(t,e,a){"use strict";var n=a("83ab"),r=a("da84"),i=a("94ca"),o=a("6eeb"),s=a("5135"),c=a("c6b6"),l=a("7156"),f=a("c04e"),u=a("d039"),m=a("7c73"),p=a("241c").f,d=a("06cf").f,h=a("9bf2").f,g=a("58a8").trim,b="Number",v=r[b],y=v.prototype,D=c(m(y))==b,I=function(t){var e,a,n,r,i,o,s,c,l=f(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+l}for(i=l.slice(2),o=i.length,s=0;s<o;s++)if(c=i.charCodeAt(s),c<48||c>r)return NaN;return parseInt(i,n)}return+l};if(i(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var N,w=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof w&&(D?u((function(){y.valueOf.call(a)})):c(a)!=b)?l(new v(I(e)),a,w):I(e)},x=n?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;x.length>E;E++)s(v,N=x[E])&&!s(w,N)&&h(w,N,d(v,N));w.prototype=y,y.constructor=w,o(r,b,w)}},beb7:function(t,e,a){"use strict";var n=a("4720"),r=a.n(n);r.a},c8d2:function(t,e,a){var n=a("d039"),r=a("5899"),i="​᠎";t.exports=function(t){return n((function(){return!!r[t]()||i[t]()!=i||r[t].name!==t}))}},cee3:function(t,e,a){},e49c:function(t,e,a){"use strict";a("498a");e["a"]={methods:{trim:function(t){this.formData[t]=this.formData[t].trim()}}}},f652:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merchandise-add-container"},[a("el-row",[a("el-col",{attrs:{xs:24,sm:18,md:12}},[a("merchandise-form",{ref:"form",on:{submit:t.submit}})],1)],1)],1)},r=[],i=(a("a4d3"),a("e01a"),a("b0c0"),a("d3b7"),a("e6cf"),a("a79d"),a("bc3a")),o=a.n(i),s=(a("99af"),a("cf45"));function c(){var t=new Date;return"".concat(t.getFullYear(),"-").concat(Object(s["c"])(t.getMonth()+1,"0",2),"-").concat(Object(s["c"])(t.getDate(),"0",2))}var l=a("04ed"),f={name:"MerchandiseAdd",components:{MerchandiseForm:l["a"]},methods:{submit:function(t){var e=this,a=t.name,n=t.description,r=t.integral,i=t.path;o.a.post("/api/merchandise/save",{name:a,description:n,integral:parseFloat(r),path:i,create_time:c()},{headers:{"Content-Type":"application/json; charset=UTF-8"}}).then((function(t){var a=t.data.code;0===a?e.$message.success("提交成功！"):e.$message.error("提交失败！")})).finally((function(){e.$refs.form.cancel()}))}}},u=f,m=(a("a3ae"),a("2877")),p=Object(m["a"])(u,n,r,!1,null,"512ea778",null);e["default"]=p.exports}}]);