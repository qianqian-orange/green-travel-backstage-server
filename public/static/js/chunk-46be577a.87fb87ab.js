(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46be577a"],{"04ed":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules,"label-width":"100px","status-icon":""}},[a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{on:{blur:function(e){return t.trim("name")}},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"碳积分",prop:"integral"},on:{blur:function(e){return t.trim("integral")}}},[a("el-input",{model:{value:t.formData.integral,callback:function(e){t.$set(t.formData,"integral",e)},expression:"formData.integral"}})],1),a("el-form-item",{attrs:{label:"商品描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",clearable:"",maxlength:"300","show-word-limit":"",resize:"none",rows:"5"},on:{blur:function(e){return t.trim("description")}},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),a("el-form-item",{attrs:{label:"图片",required:""}},[a("el-upload",{staticClass:"upload-container",attrs:{action:"http://localhost:8080/Carbon/api/pictureUtil.action",name:"merchandise","show-file-list":!1,"before-upload":t.beforeUpload,"on-success":t.success,"on-error":t.error,accept:t.accept}},[t.imageUrl?a("div",{staticClass:"avatar-container"},[a("custom-image",{attrs:{url:t.imageUrl},on:{load:function(e){return t.load(t.imageUrl)}}})],1):a("div",{staticClass:"content-container"},[a("i",{staticClass:"el-icon-plus"})])])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submit}},[t._v("提交")]),a("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1)},n=[],r=(a("a4d3"),a("e01a"),a("b0c0"),a("a9e3"),a("e49c")),s=a("9a2e"),o=a("11f8"),l={name:"MerchandiseForm",mixins:[r["a"],s["a"]],props:{id:{type:Number,default:-1},name:{type:String,default:""},integral:{type:String,default:""},description:{type:String,default:""},path:{type:String,default:""}},data:function(){return{formData:{name:"",description:"",integral:""},rules:{name:[{required:!0,message:"不能为空",whitespace:!0}],integral:[{required:!0,message:"不能为空"},{pattern:/(^[1-9][0-9]{0,4}(\.[0-9]{1,2})?$)|(^0?\.[0-9]{1,2}$)/,message:"不符合要求"}],description:[{required:!0,message:"不能为空",whitespace:!0}]},loading:!1,maxUploadCount:1}},components:{CustomImage:o["a"]},watch:{id:function(){this.init()}},computed:{imageUrl:function(){return this.fileList[0].imageUrl}},created:function(){this.init()},methods:{init:function(){-1!==this.id?(this.formData.name=this.name,this.formData.description=this.description,this.formData.integral=this.integral,this.fileList=[{path:this.path,imageUrl:this.path}]):this.fileList=[{imageUrl:"",path:""}]},cancel:function(){this.loading=!1},submit:function(){var t=this;""!==this.fileList[0].path?this.$refs.form.validate((function(e){e&&(t.loading=!0,t.$emit("submit",{name:t.formData.name,description:t.formData.description,integral:parseFloat(t.formData.integral),path:t.fileList[0].path}))})):this.$message.error("请选择一张图片！")},reset:function(){this.init(),-1===this.id&&this.$refs.form.resetFields()}}},c=l,m=(a("9078"),a("2877")),u=Object(m["a"])(c,i,n,!1,null,"679e4dcc",null);e["a"]=u.exports},"7a91":function(t,e,a){},"867b":function(t,e,a){"use strict";var i=a("7a91"),n=a.n(i);n.a},9078:function(t,e,a){"use strict";var i=a("e22f"),n=a.n(i);n.a},e22f:function(t,e,a){},f652:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merchandise-add-container"},[a("el-row",[a("el-col",{attrs:{xs:24,sm:18,md:12}},[a("merchandise-form",{ref:"form",on:{submit:t.submit}})],1)],1)],1)},n=[],r=(a("a4d3"),a("e01a"),a("b0c0"),a("d3b7"),a("e6cf"),a("a79d"),a("bc3a")),s=a.n(r),o=a("c1df"),l=a.n(o),c=a("04ed"),m={name:"MerchandiseAdd",components:{MerchandiseForm:c["a"]},methods:{submit:function(t){var e=this,a=t.name,i=t.description,n=t.integral,r=t.path;s.a.post("/api/merchandise/save",{name:a,description:i,integral:parseFloat(n),path:r,create_time:l()().format("YYYY-MM-DD")},{headers:{"Content-Type":"application/json; charset=UTF-8"}}).then((function(t){var a=t.data.code;0===a?e.$message.success("提交成功！"):e.$message.error("提交失败！")})).finally((function(){e.$refs.form.cancel()}))}}},u=m,f=(a("867b"),a("2877")),d=Object(f["a"])(u,i,n,!1,null,"4e211ffe",null);e["default"]=d.exports}}]);